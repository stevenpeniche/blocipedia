<h1>Edit Wiki</h1>

<div class="container-fluid">
  <div class="row">
    <% if current_user.admin? || current_user.premium? %>
      <div class='field'>
        <%= form_for [@wiki, Collaborator.new] do |f| %>
          <%= f.label :collaborators %>
          <%= f.select :user, options_for_select(@user_emails, :selected => params[:user]) %>
          <%= f.submit 'Add', class: 'btn btn-secondary' %>
        <% end %>
        <% if @wiki.users.any? %>
          <h3>Current collaborators</h3>
          <% @wiki.users.each do |user| %>
            <p><%= user.email %>
            | <%= link_to "x", wiki_collaborator_path(user_id: @user.id, wiki_id: @wiki.id), method: :delete %>
          </p>
          <% end %>
        <% end %>
      </div>
    <% else %>
        <h3>Current collaborators</h3>
        <% @wiki.users.each do |user| %>
          <% if user.email == current_user.email %>
            <p><%= current_user.email %>
            | <%= link_to "x", wiki_collaborator_path(user_id: @user.id, wiki_id: @wiki.id), method: :delete %>
            </p>
          <% end %>
        <% end %>
    <% end %>
  </div>
</div>

<div class="row">
	<div class="col-md-4">
		<p>Guidelines for wikis</p>
		<ul>
			<li>Too many words ğŸ‘ğŸ½</li>
		 	<li>Relates to its content ğŸ‘ğŸ½</li>
		 	<li>SPAM = BAN ğŸ˜¡</li>
		</ul>
	</div>
	<div class="col-md-8">
		<%= form_for @wiki do |f| %>
			<div class="form-group">
				<%= f.label :title %>
				<%= f.text_field :title, class: 'form-control', placeholder: "Enter wiki title" %>
			</div>
			<div class="form-group">
				<%= f.label :body %>
				<%= f.text_area :body, rows: 8, class: 'form-control', placeholder: "Enter wiki body" %>
			</div>
			<% if current_user.admin? || current_user.premium? %>
			  <div class="form-group">
			    <%= f.label :private, class: 'checkbox' do %>
			      <%= f.check_box :private %> Private wiki
			    <% end %>
			  </div>
			<% end %>
			<div class="form-group">
				<%= f.submit "Save", class: 'btn btn-success' %>
			</div>
		<% end %>
	</div>
</div>
